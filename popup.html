<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YouTube Transcript Extractor</title>
    <link rel="stylesheet" href="popup.css" />
  </head>

  <body>
    <div class="container">
      <!-- --------------------------------------------------- -->
      <!-- Header -->
      <header>
        <h1>📝 YouTube Transcript</h1>
        <p class="subtitle">Extract transcripts from any YouTube video</p>
      </header>

      <!-- --------------------------------------------------- -->
      <!-- Loading State -->
      <section id="loading" class="section hidden" aria-live="polite">
        <div class="spinner"></div>
        <p>Loading video information...</p>
      </section>

      <!-- --------------------------------------------------- -->
      <!-- Error State -->
      <section id="error" class="section hidden" aria-live="assertive">
        <div class="error-icon" aria-hidden="true">⚠️</div>
        <p id="error-message">Something went wrong</p>
        <div class="button-group">
          <button id="retry-btn" class="btn btn-secondary">Try Again</button>
        </div>
      </section>

      <!-- --------------------------------------------------- -->
      <!-- Video Info Section -->
      <section id="video-info" class="section hidden">
        <div class="video-details">
          <h3 id="video-title">Video Title</h3>
          <p class="video-id">ID: <span id="video-id-display">—</span></p>
        </div>

        <!-- Language Selection -->
        <div id="language-selection" class="hidden">
          <label for="language-select">Choose language:</label>
          <select id="language-select" class="form-control">
            <option value="">Select a language…</option>
          </select>
        </div>

        <!-- Action Buttons -->
        <div class="button-group">
          <button id="extract-btn" class="btn btn-primary">
            📝 Extract Transcript
          </button>
          <button id="refresh-btn" class="btn btn-secondary">🔄 Refresh</button>
        </div>

        <!-- Info Tip -->
        <div class="info-notice" role="note">
          <p>
            <strong>💡 Tip:</strong> Enable CC on the video player and
            transcripts will be captured automatically.
          </p>
        </div>

        <!-- Auto-Capture Banner -->
        <div id="transcript-captured-banner" class="captured-banner hidden">
          <div class="captured-icon" aria-hidden="true">✅</div>
          <div class="captured-text">
            <strong>Transcript Captured!</strong>
            <p>Auto-captured from video captions</p>
          </div>
          <button id="dismiss-captured" class="btn-dismiss" title="Dismiss">
            ✕
          </button>
        </div>
      </section>

      <!-- --------------------------------------------------- -->
      <!-- No Transcripts -->
      <section id="no-transcripts" class="section hidden">
        <div class="info-icon" aria-hidden="true">ℹ️</div>
        <h3>No Transcripts Available</h3>
        <p>This video doesn’t have captions or subtitles available.</p>
        <button id="refresh-no-transcripts" class="btn btn-secondary">
          Try Again
        </button>
      </section>

      <!-- --------------------------------------------------- -->
      <!-- Results Section -->
      <section id="results" class="section hidden">
        <div class="results-header">
          <h3>📄 Transcript Results</h3>
          <div class="transcript-info">
            <span id="language-info" class="info-badge">English</span>
            <span id="type-info" class="info-badge">Auto-generated</span>
            <span id="word-count" class="info-badge">0 words</span>
          </div>
        </div>

        <!-- Format Toggle -->
        <div class="format-toggle">
          <label class="toggle-switch">
            <input
              type="checkbox"
              id="timestamp-toggle"
              aria-label="Include timestamps"
            />
            <span class="toggle-slider"></span>
            <span class="toggle-label">Include timestamps</span>
          </label>
        </div>

        <!-- Transcript Display -->
        <div class="transcript-container">
          <textarea
            id="transcript-text"
            readonly
            placeholder="Transcript will appear here..."
            aria-label="Transcript text"
          ></textarea>
        </div>

        <!-- Action Buttons -->
        <div class="button-group">
          <button id="copy-btn" class="btn btn-primary">📋 Copy</button>
          <button id="download-btn" class="btn btn-secondary">
            💾 Download
          </button>
          <button id="extract-another" class="btn btn-secondary">
            🔄 Extract Another
          </button>
        </div>

        <!-- Success Message -->
        <div id="copy-success" class="success-message hidden" role="status">
          ✅ Copied to clipboard!
        </div>
      </section>

      <!-- --------------------------------------------------- -->
      <!-- Not YouTube -->
      <section id="not-youtube" class="section hidden">
        <div class="info-icon" aria-hidden="true">🎬</div>
        <h3>Navigate to YouTube</h3>
        <p>Please open a YouTube video page to extract transcripts.</p>
        <a
          href="https://youtube.com"
          target="_blank"
          rel="noopener"
          class="btn btn-primary"
        >
          Open YouTube
        </a>
      </section>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
